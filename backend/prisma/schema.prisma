// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model GroceryStore {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  address          Address          @relation(fields: [addressId], references: [id])
  addressId        Int              @unique
  aisles           Aisle[]
  groceryStoreName GroceryStoreName @relation(fields: [storeName], references: [name])
  storeName        String
}

model GroceryStoreName {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  name          String         @unique
  groceryStores GroceryStore[]
}

model Address {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  addressLineOne String
  addressLineTwo String?
  city           String
  state          String
  zip            Int
  groceryStore   GroceryStore?

  @@unique([addressLineOne, city, state])
}

model GroceryItem {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  name       String                @unique
  categories GroceryItemCategory[]
  aisle      Aisle[]
}

model GroceryItemCategory {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  name        String        @unique
  groceryItem GroceryItem[]
  aisle       Aisle[]
}

model Aisle {
  id        Int      @id @default(autoincrement())
  updatedAt DateTime @updatedAt
  name           String
  categories     GroceryItemCategory[]
  items          GroceryItem[]
  groceryStore   GroceryStore          @relation(fields: [groceryStoreId], references: [id])
  groceryStoreId Int
}
